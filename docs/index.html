<html>
    <head>
        <title>Mapper</title>
        <meta name="google-site-verification" content="04S84RhNuvIwVNcTL-_J9Eg4MaOz4e8hSXlZeYWYL38" />
        <meta name="author" content="Drazen Mrvos" />
        <link rel="icon" href="assets/github.png" />
        <link rel="stylesheet" href="index.css">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    </head>
    <body>
        <nav class="navbar navbar-fixed-top navbar-expand-lg navbar-dark bg-dark" style="padding-left: 10%;padding-right: 10%;">
            <a class="navbar-brand" href="#">Mapper</a>

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
          
            <div class="collapse navbar-collapse" id="navbarSupportedContent" style="padding-left: 60px;">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                  <a class="nav-link" href="#about">About</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="#examples">Examples</a>
                  </li>
              </ul>
                <ul class="navbar-nav flex-row ml-md-auto d-none d-md-flex" style="float: right;">
                <li class="nav-item active" >
                    <a class="nav-link" href="https://github.com/dmrvos86/Mapper" target="blank">
                        <svg style="height: 30px;" class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 499.36" focusable="false"><title>GitHub</title><path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd"></path></svg>
                        GitHub page<span class="sr-only">(current)</span>
                    </a>
                  </li>
              </ul>
            </div>
          </nav>

        <div class="container">
            <h1 id="about">Mapper</h1>
            <h2>About</h2>
            <p>
                Mapper is very simple JavaScript library which is used to get/set data from forms or any other container. It's entirely written in TypeScript, without any external dependencies. Primary motivation for building tool like this was:
            </p>
            <ul>
                <li>
                    using .Net Core and Razor pages is very simple and fast way to build apps. In order to communicate with APIs, I needed simple way to map 
                    data to and from forms.
                </li>
                <li>
                    didn't want to use libraries which introduce observables as I only wanted to map data on specific events (API data received, user clicked save, ...)
                </li>
                <li>wanted to have library which is written using vanilla typescript</li>
                <li>didn't want to introduce other libraries which by themselves have other dependencies which by themselves have other ...</li>
                <li>to modify it to automatically work with other components I usually use in projects like bootstrap datepicker, select2, ...</li>
                <li>to have my first public project on GitHub</li>
            </ul>
            
            <span id="howtouse"></span><br/>
            <h2>How to use</h2>
            <p>
                This page shows only examples, to check out full documentation, please visit project's <a href="https://github.com/dmrvos86/Mapper" target="blank">GitHub page</a>.
            </p>

            <span id="examples"></span><br/>
            <h2>Examples</h2>

            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            Example 1 - simple mapping
                        </div>
                        <div class="card-body example">
                            <div class="example-left">
                                <form id="formExample1">
                                    <div class="form-group">
                                        <label for="firstName">First name (<code>map="firstName"</code>)</label>
                                        <input type="text" class="form-control" name="firstName" map="firstName" aria-describedby="firstName" />
                                    </div>
                                    <div class="form-group">
                                        <label for="lastName">Last name (<code>map="lastName")</code></label>
                                        <input type="text" class="form-control" name="lastName" map="lastName" aria-describedby="lastName" />
                                    </div>
                                    <div class="form-group">
                                        <label for="age">Age (<code>map="age")</code></label>
                                        <input type="number" class="form-control" name="age" map="age" aria-describedby="age" />
                                    </div>
                                    <div class="form-group">
                                        <label for="userType">User type (<code>map="userType"</code>)</label>
                                        <select class="form-control" name="userType" map="userType" aria-describedby="userType">
                                            <option>Reader</option>
                                            <option>Admin</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Has verified e-mail <code>map="hasVerifiedEmail"</code></label>
                                        <div class="form-check">
                                            <input type="checkbox" name="hasVerifiedEmail" map="hasVerifiedEmail" aria-describedby="hasVerifiedEmail" />
                                            <label class="form-check-label">Yes/No</label>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>Is locked <code>map="hasVerifiedEmail"</code></label>
                                        <div class="form-check">
                                            <input type="checkbox" name="locked" map="locked" aria-describedby="locked" value />
                                            <label class="form-check-label">Yes/No</label>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="example-right">
                                <textarea class="form-control" id="txtExample1" style="height: 90%;"></textarea>
                            </div>
                            <div class="example-actions">
                                <button type="button" class="btn btn-primary" id="btnExample1Get"> Get </button>
                                <button type="button" class="btn btn-secondary" id="btnExample1Set"> Set </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            Example 2 -  nested mapping
                        </div>
                        <div class="card-body example">
                            <div class="example-left">
                                <form id="formExample2">
                                    <div class="form-group">
                                        <label for="firstName">First name (<code>map="userData.firstName"</code>)</label>
                                        <input type="text" class="form-control" name="firstName" map="userData.firstName" aria-describedby="firstName" />
                                    </div>
                                    <div class="form-group">
                                        <label for="lastName">Last name (<code>map="userData.lastName"</code>)</label>
                                        <input type="text" class="form-control" name="lastName" map="userData.lastName" aria-describedby="lastName" />
                                    </div>
                                    <div class="form-group">
                                        <label for="userType">User type (<code>map="authData.userType"</code>)</label>
                                        <select class="form-control" name="userType" map="authData.userType" aria-describedby="userType">
                                            <option>Reader</option>
                                            <option>Admin</option>
                                        </select>
                                    </div>
                                </form>
                            </div>
                            <div class="example-right">
                                <textarea class="form-control" id="txtExample2" style="height: 90%;"></textarea>
                            </div>
                            <div class="example-actions">
                                <button type="button" class="btn btn-primary" id="btnExample2Get"> Get </button>
                                <button type="button" class="btn btn-secondary" id="btnExample2Set"> Set </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            Example 3 -  simple array mapping
                        </div>
                        <div class="card-body example">
                            <div class="example-left">
                                <form id="formExample3">
                                    <div class="form-group">
                                        <label for="firstName">Username <code>map="username"</code></label>
                                        <input type="text" class="form-control" name="username" map="userData.username" aria-describedby="username" />
                                    </div>
                                    
                                    <label>Roles <code>map="roles[]"</code></label>
                                    <div class="form-check">
                                        <input type="checkbox" value="admin" name="role" map="roles[]" aria-describedby="role" />
                                        <label class="form-check-label">Admin</label>
                                    </div>
                                    <div class="form-check">
                                        <input type="checkbox" value="pwruser" name="role" map="roles[]" aria-describedby="role" />
                                        <label class="form-check-label">Poweruser</label>
                                    </div>
                                    <div class="form-check">
                                        <input type="checkbox" value="reader" name="role" map="roles[]" aria-describedby="role" />
                                        <label class="form-check-label">Reader</label>
                                    </div>
                                    <br/>
                                    <div class="form-group">
                                        <label for="consents">Consents <code>map="consents[]"</code></label>
                                        <select multiple class="form-control" name="consents" map="consents[]" aria-describedby="consents" style="width: 90%;">
                                            <option value="email">Receive promo emails consent</option>
                                            <option value="data-processing">Data processing consent</option>
                                        </select>
                                    </div>
                                </form>
                            </div>
                            <div class="example-right">
                                <textarea class="form-control" id="txtExample3" style="height: 90%;"></textarea>
                            </div>
                            <div class="example-actions">
                                <button type="button" class="btn btn-primary" id="btnExample3Get"> Get </button>
                                <button type="button" class="btn btn-secondary" id="btnExample3Set"> Set </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            Example 4 -  complex array mapping
                        </div>
                        <div class="card-body example">
                            <div class="example-left">
                                <form id="formExample4">
                                    <p style="text-align: justify;">
                                        Each input has map property like <code>map="rolesAsJsonMap[userId=1].department"</code>. This will map
                                        input value (if checked) to element which matches provided <code>userId</code> condition. 
                                    </p>
                                    <table class="matrix">
                                        <tr>
                                            <td></td>
                                            <td>Department 1</td>
                                            <td>Department 2</td>
                                            <td>Department 3</td>
                                        </tr>
                                        <tr>
                                            <td>User 1</td>
                                            <td><input type="radio" name="user1" checked value="dep-A" map="rolesAsJsonMap[userId=1].department" /></td>
                                            <td><input type="radio" name="user1" value="dep-B" map="rolesAsJsonMap[userId=1].department" /></td>
                                            <td><input type="radio" name="user1" value="dep-C" map="rolesAsJsonMap[userId=1].department" /></td>
                                        </tr><tr>
                                            <td>User 2</td>
                                            <td><input type="radio" name="user2" checked value="dep-A" map="rolesAsJsonMap[userId=2].department" /></td>
                                            <td><input type="radio" name="user2" value="dep-B" map="rolesAsJsonMap[userId=2].department" /></td>
                                            <td><input type="radio" name="user2" value="dep-C" map="rolesAsJsonMap[userId=2].department" /></td>
                                        </tr>
                                        </tr>
                                        <tr>
                                            <td>User 3</td>
                                            <td><input type="radio" name="user3" checked value="dep-A" map="rolesAsJsonMap[userId=3].department" /></td>
                                            <td><input type="radio" name="user3" value="dep-B" map="rolesAsJsonMap[userId=3].department" /></td>
                                            <td><input type="radio" name="user3" value="dep-C" map="rolesAsJsonMap[userId=3].department" /></td>
                                        </tr>
                                    </table>
                                </form>
                            </div>
                            <div class="example-right">
                                <textarea class="form-control" id="txtExample4" style="height: 90%;"></textarea>
                            </div>
                            <div class="example-actions">
                                <button type="button" class="btn btn-primary" id="btnExample4Get"> Get </button>
                                <button type="button" class="btn btn-secondary" id="btnExample4Set"> Set </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            Example 5 -  complex array mapping
                        </div>
                        <div class="card-body example">
                            <div class="example-left">
                                <form id="formExample5">
                                    <p style="text-align: justify;margin-top: 30px;">
                                        Each input element in first row has map property in <code>map="rolesAsJsonMap[roleId=1].userId[]"</code> form. This will add
                                        input value (if checked) to element which matches <code>role=1</code> condition.
                                    </p>
                                    <table class="matrix">
                                        <tr>
                                            <td></td>
                                            <td>User 1</td>
                                            <td>User 2</td>
                                            <td>User 3</td>
                                        </tr>
                                        <tr>
                                            <td>Role 1</td>
                                            <td><input type="checkbox" value="user1" map="rolesAsArray[roleId=1].userIds[]" /></td>
                                            <td><input type="checkbox" value="user2" map="rolesAsArray[roleId=1].userIds[]" /></td>
                                            <td><input type="checkbox" value="user3" map="rolesAsArray[roleId=1].userIds[]" /></td>
                                        </tr><tr>
                                            <td>Role 2</td>
                                            <td><input type="checkbox" value="user1" map="rolesAsArray[roleId=2].userIds[]" /></td>
                                            <td><input type="checkbox" value="user2" map="rolesAsArray[roleId=2].userIds[]" /></td>
                                            <td><input type="checkbox" value="user3" map="rolesAsArray[roleId=2].userIds[]" /></td>
                                        </tr>
                                        </tr>
                                        <tr>
                                            <td>Role 3</td>
                                            <td><input type="checkbox" value="user1" map="roles[roleId=3].userIds[]" /></td>
                                            <td><input type="checkbox" value="user2" map="roles[roleId=3].userIds[]" /></td>
                                            <td><input type="checkbox" value="user3" map="roles[roleId=3].userIds[]" /></td>
                                        </tr>
                                    </table>
                                </form>
                            </div>
                            <div class="example-right">
                                <textarea class="form-control" id="txtExample5" style="height: 90%;"></textarea>
                            </div>
                            <div class="example-actions">
                                <button type="button" class="btn btn-primary" id="btnExample5Get"> Get </button>
                                <button type="button" class="btn btn-secondary" id="btnExample5Set"> Set </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            Example 6 -  complex array mapping - finding array element by index
                        </div>
                        <div class="card-body example">
                            <div class="example-left">
                                <form id="formExample6">
                                    <p style="text-align: justify;">
                                        Mapping elements by array index in case finding elements by key is not possible
                                    </p>
                                    
                                    <div class="form-group">
                                        <label for="phone1">Phone 1 (<code>map="userData.contacts[0].phone"</code>)</label>
                                        <input type="text" class="form-control" name="phone1" map="contacts[0].phone" aria-describedby="phone1" />
                                    </div>

                                    <div class="form-group">
                                        <label for="phone2">Phone 2 (<code>map="userData.contacts[1].phone"</code>)</label>
                                        <input type="text" class="form-control" name="phone2" map="contacts[1].phone" aria-describedby="phone2" />
                                    </div>
                                </form>
                            </div>
                            <div class="example-right">
                                <textarea class="form-control" id="txtExample6" style="height: 90%;"></textarea>
                            </div>
                            <div class="example-actions">
                                <button type="button" class="btn btn-primary" id="btnExample6Get"> Get </button>
                                <button type="button" class="btn btn-secondary" id="btnExample6Set"> Set </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            Example 7
                        </div>
                        <div class="card-body example">
                            <div class="example-left">
                                <form id="formExample7">
                                    <p style="text-align: justify;">
                                        Mapping elements to array by order of appearance
                                    </p>
                                    
                                    <div class="form-group">
                                        <label for="phone1">Phone 1 (<code>map="userData.contacts[].phone"</code>)</label>
                                        <input type="text" class="form-control" name="phone1" map="contacts[].phone" aria-describedby="phone1" />
                                    </div>

                                    <div class="form-group">
                                        <label for="phone2">Phone 2 (<code>map="userData.contacts[].phone"</code>)</label>
                                        <input type="text" class="form-control" name="phone2" map="contacts[].phone" aria-describedby="phone2" />
                                    </div>
                                </form>
                            </div>
                            <div class="example-right">
                                <textarea class="form-control" id="txtExample7" style="height: 90%;"></textarea>
                            </div>
                            <div class="example-actions">
                                <button type="button" class="btn btn-primary" id="btnExample7Get"> Get </button>
                                <button type="button" class="btn btn-secondary" id="btnExample7Set"> Set </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            Example 8 -  Using <code>data-attribute</code> instead of value
                        </div>
                        <div class="card-body example">
                            <div class="example-left">
                                <form id="formExample8">
                                    <p style="text-align: justify;">
                                        Components like datepickers might not use value attribute to store value in required format.
                                        Easiest way is to store data in wanted format to <code>data-value</code> attribute. Name of this attribute can
                                        be changed. 
                                    </p>
                                    <p style="text-align: justify;">
                                        To always set/get date in ISO format, all that needs to be done in following example is to set <code>data-value=""</code> attribute
                                        and set event <code>onchange="this.setAttribute('data-value', this.valueAsDate.toISOString().substr(0, 10))"</code>.
                                    </p>

                                    <div class="form-group">
                                        <label for="datepicker">Date of birth (<code>map="datepicker"</code>)</label>
                                        <input type="date" class="form-control" name="dateOfBirth" 
                                            onchange="this.setAttribute('data-value', this.valueAsDate.toISOString().substr(0, 10))"
                                            data-value="" map="dateOfBirth" aria-describedby="dateOfBirth" />
                                    </div>
                                </form>
                            </div>
                            <div class="example-right">
                                <textarea class="form-control" id="txtExample8" style="height: 90%;"></textarea>
                            </div>
                            <div class="example-actions">
                                <button type="button" class="btn btn-primary" id="btnExample8Get"> Get </button>
                                <button type="button" class="btn btn-secondary" id="btnExample8Set"> Set </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            Example 9 -  Mapping raw JSON data
                        </div>
                        <div class="card-body example">
                            <div class="example-left">
                                <form id="formExample9">
                                    <p style="text-align: justify;">
                                        Additional parsers can be specified (please see project page for more info) and used to map data. Json parser sets JSON data 
                                        as string and gets it back as JSON.
                                    </p>

                                    <div class="form-group">
                                        <label for="dynamicData">Date of birth (<code>map="dynamicData" map-parser="json"</code>)</label>
                                        <input type="text" class="form-control" name="dynamicData"  map="dynamicData" map-parser="json" aria-describedby="dynamicData" />
                                    </div>
                                </form>
                            </div>
                            <div class="example-right">
                                <textarea class="form-control" id="txtExample9" style="height: 90%;"></textarea>
                            </div>
                            <div class="example-actions">
                                <button type="button" class="btn btn-primary" id="btnExample9Get"> Get </button>
                                <button type="button" class="btn btn-secondary" id="btnExample9Set"> Set </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer>
            <a class="nav-link" href="https://github.com/dmrvos86/Mapper" target="blank">
                <svg style="height: 20px;" class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 499.36" focusable="false"><title>GitHub</title><path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd"></path></svg>
                GitHub page<span class="sr-only">(current)</span>
            </a>
        </footer>
    </body>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script type="text/javascript" src="lib/mapper.js"></script>
    <script type="text/javascript" src="examples.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.10/lodash.min.js"></script>
    <script type="text/javascript" src="index.js"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-164002680-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-164002680-1');
    </script>
</html>